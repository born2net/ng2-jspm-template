<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Demo App</title>
  <link rel="stylesheet" href="/main.css">
  <script src="/jspm_packages/system.js"></script>
  <script src="/jspm.browser-defaults.js"></script>
  <script src="/jspm.browser.js"></script>
  <script src="/jspm.config.js"></script>
</head>
<base href="/">
<body>
<app>
  Loading...
</app>

<script>
  Promise.all([
    System.import("/dev/ports.js"),
    System.import("systemjs-hot-reloader/hot-reloader"),
    System.import("src/dev/main.dev.ts")
  ]).then(function (mods) {
    initLivereload(mods[0].initLivereload);
    initHotModuleReplacement(mods[1], mods[0].hmr);

    function initLivereload(port) {
      var script = document.createElement("script");
      script.src = "//" + location.hostname + ":" + port + "/livereload.js";
      document.head.appendChild(script);
    }

    function initHotModuleReplacement(HotReloader, port) {
      new HotReloader
        .default("//" + location.hostname + ":" + port)
        .hotReload("src/dev/main.dev.ts");
    }
  });
</script>
</body>
</html>